{"ast":null,"code":"var _jsxFileName = \"/Users/HS/Documents/GitHub/dalguna/dalguna/dalguna/src/pages/RestaurantPage.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport RestTitleBox from '../components/RestTitleBox.js';\nimport dhspic from '../img/DHS_photo.jpeg';\nimport MenuListItem from '../components/MenuListItem';\nimport RestTab from '../components/RestTab.js';\nimport TabBar from '../components/TabBar.js';\nimport CartButton from '../components/CartButton.js';\nimport MenuModal from '../components/MenuModal.js';\nimport CartModal from '../components/CartModal.js';\nimport RoomCard from '../components/RoomCard.js';\nimport staticDB from \"../db/static.json\";\nimport { collection, onSnapshot, getDoc, doc } from \"firebase/firestore\";\nimport { db } from \"../firebase-config.js\";\nimport '../rest-page.css';\nimport { AiOutlineArrowLeft } from \"react-icons/ai\";\n\nfunction RestaurantPage() {\n  const params = useParams();\n  const {\n    userId,\n    restId\n  } = params;\n  const navigate = useNavigate(); // const arrRestName = [\"대학생 치킨\", \"베리신주쿠\", \"마쯔미\"];\n\n  const [isUserJoingFromRoomCard, setIsUserJoingFromRoomCard] = useState(false);\n  const [classNameRestPage, setClassNameRestPage] = useState(\"restPage\");\n  const [restInfo, setRestInfo] = useState(staticDB[params.restId]);\n  const [menuItemInfo, setMenuItemInfo] = useState(restInfo.menu);\n  const [modal, setModal] = useState( /*#__PURE__*/React.createElement(React.Fragment, null));\n\n  function openMenuModal(menu) {\n    setModal( /*#__PURE__*/React.createElement(MenuModal, {\n      menuInfo: menu,\n      restName: restInfo.name,\n      setModal: setModal,\n      cartItem: cartItem,\n      setCartItem: setCartItem,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 14\n      }\n    }));\n  }\n\n  function handleCartItemUpdate() {\n    if (document.getElementsByClassName(\"restPage\")[0].previousSibling !== null && document.getElementsByClassName(\"restPage\")[0].previousSibling.className === \"CartModal__\") {\n      setModal( /*#__PURE__*/React.createElement(CartModal, {\n        restName: restInfo.name,\n        menuList: cartItem,\n        setMenuList: setCartItem,\n        setModal: setModal,\n        roomList: roomList,\n        roomLength: roomInfo.length,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 16\n        }\n      }));\n    }\n  }\n\n  const [cartItem, setCartItem] = useState([]);\n  useEffect(handleCartItemUpdate, [cartItem]);\n\n  function openCartModal() {\n    setModal( /*#__PURE__*/React.createElement(CartModal, {\n      restName: restInfo.name,\n      menuList: cartItem,\n      setMenuList: setCartItem,\n      setModal: setModal,\n      roomList: roomList,\n      roomLength: roomInfo.length,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 14\n      }\n    }));\n  }\n\n  const menuList = menuItemInfo.map(menu => /*#__PURE__*/React.createElement(\"li\", {\n    key: menu.id,\n    style: {\n      listStyle: 'none'\n    },\n    className: \"mainPage__menu-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    onClick: () => openMenuModal(menu),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }, \" \", /*#__PURE__*/React.createElement(MenuListItem, {\n    menuItemInfo: menu,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 45\n    }\n  }))));\n  const info = /*#__PURE__*/React.createElement(\"div\", {\n    className: \"restPage__info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"restPage__info-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, restInfo.info), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"restPage__info-opening\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, \"Open at \", restInfo.open), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, \"Close at \", restInfo.close)));\n  const [roomInfo, setRoomInfo] = useState([]);\n\n  function getRooms() {\n    onSnapshot(collection(db, \"rooms\"), snapshot => {\n      console.log(getDoc(doc(db, \"users\", userId)).then(doc => doc.data()));\n      const tmp = [];\n      snapshot.forEach(doc => tmp.push(doc.data()));\n      setRoomInfo(tmp.map(room => ({\n        'roomId': room.id,\n        'restName': room.restName,\n        'deliInfo': room.deliInfo,\n        'ordStat': room.ordStat,\n        'parti': room.parti\n        /*, 'entime': room.endTime*/\n\n      })));\n    });\n  }\n\n  useEffect(() => {\n    getRooms();\n  }, []);\n\n  for (const room of roomInfo) {\n    room['rest'] = restInfo;\n  }\n\n  const [roomList, setRoomList] = useState( /*#__PURE__*/React.createElement(React.Fragment, null));\n  useEffect(() => {\n    setRoomList(roomInfo.filter(room => room.restName == restInfo.name).map((room, i) => /*#__PURE__*/React.createElement(\"li\", {\n      key: i,\n      style: {\n        listStyle: 'none'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 35\n      }\n    }, \" \", /*#__PURE__*/React.createElement(RoomCard, {\n      roomInfo: room,\n      photo: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 48\n      }\n    })))));\n  }, [roomInfo]);\n  const [curTab, setCurTab] = useState(\"menu\");\n  const curTabContent = {\n    \"menu\": menuList,\n    \"info\": info,\n    \"room\": roomList\n  };\n\n  function goBack() {\n    if (cartItem.length != 0) {\n      if (window.confirm(\"카트가 비워집니다. 뒤로 가시겠습니까?\")) {\n        navigate(-1);\n      }\n    } else {\n      navigate(-1);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ui-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }, modal, /*#__PURE__*/React.createElement(\"div\", {\n    className: classNameRestPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rest-title-image\",\n    style: {\n      backgroundImage: `url(${restInfo.photo})`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rest-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"rest-title-back\",\n    onClick: goBack,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(AiOutlineArrowLeft, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(RestTitleBox, {\n    restName: restInfo.name,\n    restRating: \"5.0 (100)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(RestTab, {\n    curTab: curTab,\n    setCurTab: setCurTab,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"restPage__content-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }, curTabContent[curTab]), /*#__PURE__*/React.createElement(CartButton, {\n    cartItem: cartItem,\n    onClick: openCartModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  })));\n}\n\nexport default RestaurantPage;","map":{"version":3,"sources":["/Users/HS/Documents/GitHub/dalguna/dalguna/dalguna/src/pages/RestaurantPage.js"],"names":["React","useState","useEffect","useParams","useNavigate","RestTitleBox","dhspic","MenuListItem","RestTab","TabBar","CartButton","MenuModal","CartModal","RoomCard","staticDB","collection","onSnapshot","getDoc","doc","db","AiOutlineArrowLeft","RestaurantPage","params","userId","restId","navigate","isUserJoingFromRoomCard","setIsUserJoingFromRoomCard","classNameRestPage","setClassNameRestPage","restInfo","setRestInfo","menuItemInfo","setMenuItemInfo","menu","modal","setModal","openMenuModal","name","cartItem","setCartItem","handleCartItemUpdate","document","getElementsByClassName","previousSibling","className","roomList","roomInfo","length","openCartModal","menuList","map","id","listStyle","info","open","close","setRoomInfo","getRooms","snapshot","console","log","then","data","tmp","forEach","push","room","restName","deliInfo","ordStat","parti","setRoomList","filter","i","curTab","setCurTab","curTabContent","goBack","window","confirm","backgroundImage","photo"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,SAAT,EAAoBC,WAApB,QAAuC,kBAAvC;AAEA,OAAOC,YAAP,MAAyB,+BAAzB;AAEA,OAAOC,MAAP,MAAmB,uBAAnB;AACA,OAAOC,YAAP,MAAyB,4BAAzB;AACA,OAAOC,OAAP,MAAoB,0BAApB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AACA,OAAOC,QAAP,MAAqB,2BAArB;AAEA,OAAOC,QAAP,MAAqB,mBAArB;AACA,SAASC,UAAT,EAAqBC,UAArB,EAAiCC,MAAjC,EAAyCC,GAAzC,QAAoD,oBAApD;AACA,SAASC,EAAT,QAAmB,uBAAnB;AAEA,OAAO,kBAAP;AACA,SAASC,kBAAT,QAAmC,gBAAnC;;AAEA,SAASC,cAAT,GAA0B;AACxB,QAAMC,MAAM,GAAGnB,SAAS,EAAxB;AACA,QAAM;AAAEoB,IAAAA,MAAF;AAAUC,IAAAA;AAAV,MAAqBF,MAA3B;AACA,QAAMG,QAAQ,GAAGrB,WAAW,EAA5B,CAHwB,CAIxB;;AAEA,QAAM,CAACsB,uBAAD,EAA0BC,0BAA1B,IAAwD1B,QAAQ,CAAC,KAAD,CAAtE;AACA,QAAM,CAAC2B,iBAAD,EAAoBC,oBAApB,IAA4C5B,QAAQ,CAAC,UAAD,CAA1D;AAEA,QAAM,CAAC6B,QAAD,EAAWC,WAAX,IAA0B9B,QAAQ,CAACa,QAAQ,CAACQ,MAAM,CAACE,MAAR,CAAT,CAAxC;AACA,QAAM,CAACQ,YAAD,EAAeC,eAAf,IAAkChC,QAAQ,CAAC6B,QAAQ,CAACI,IAAV,CAAhD;AAEA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBnC,QAAQ,eAAC,yCAAD,CAAlC;;AAEA,WAASoC,aAAT,CAAuBH,IAAvB,EAA6B;AAC3BE,IAAAA,QAAQ,eAAC,oBAAC,SAAD;AAAW,MAAA,QAAQ,EAAEF,IAArB;AAA2B,MAAA,QAAQ,EAAEJ,QAAQ,CAACQ,IAA9C;AAAoD,MAAA,QAAQ,EAAEF,QAA9D;AAAwE,MAAA,QAAQ,EAAEG,QAAlF;AAA4F,MAAA,WAAW,EAAEC,WAAzG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAD,CAAR;AACD;;AAED,WAASC,oBAAT,GAAgC;AAC9B,QAAIC,QAAQ,CAACC,sBAAT,CAAgC,UAAhC,EAA4C,CAA5C,EAA+CC,eAA/C,KAAmE,IAAnE,IACCF,QAAQ,CAACC,sBAAT,CAAgC,UAAhC,EAA4C,CAA5C,EAA+CC,eAA/C,CAA+DC,SAA/D,KAA6E,aADlF,EACiG;AAC/FT,MAAAA,QAAQ,eAAC,oBAAC,SAAD;AAAW,QAAA,QAAQ,EAAEN,QAAQ,CAACQ,IAA9B;AAAoC,QAAA,QAAQ,EAAEC,QAA9C;AAAwD,QAAA,WAAW,EAAEC,WAArE;AAAkF,QAAA,QAAQ,EAAEJ,QAA5F;AACH,QAAA,QAAQ,EAAEU,QADP;AACiB,QAAA,UAAU,EAAEC,QAAQ,CAACC,MADtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAD,CAAR;AAED;AAEF;;AAED,QAAM,CAACT,QAAD,EAAWC,WAAX,IACFvC,QAAQ,CAAC,EAAD,CADZ;AAEAC,EAAAA,SAAS,CAACuC,oBAAD,EAAuB,CAACF,QAAD,CAAvB,CAAT;;AAEA,WAASU,aAAT,GAAyB;AACvBb,IAAAA,QAAQ,eAAC,oBAAC,SAAD;AAAW,MAAA,QAAQ,EAAEN,QAAQ,CAACQ,IAA9B;AAAoC,MAAA,QAAQ,EAAEC,QAA9C;AAAwD,MAAA,WAAW,EAAEC,WAArE;AAAkF,MAAA,QAAQ,EAAEJ,QAA5F;AACH,MAAA,QAAQ,EAAEU,QADP;AACiB,MAAA,UAAU,EAAEC,QAAQ,CAACC,MADtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAD,CAAR;AAED;;AAED,QAAME,QAAQ,GAAGlB,YAAY,CAACmB,GAAb,CAAkBjB,IAAD,iBAClC;AAAI,IAAA,GAAG,EAAEA,IAAI,CAACkB,EAAd;AAAkB,IAAA,KAAK,EAAE;AAACC,MAAAA,SAAS,EAAC;AAAX,KAAzB;AAA6C,IAAA,SAAS,EAAG,qBAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAG,IAAA,OAAO,EAAE,MAAMhB,aAAa,CAACH,IAAD,CAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAwC,oBAAC,YAAD;AAAc,IAAA,YAAY,EAAEA,IAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAxC,CADF,CADiB,CAAjB;AAMA,QAAMoB,IAAI,gBACR;AAAK,IAAA,SAAS,EAAG,gBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAG,IAAA,SAAS,EAAG,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAsCxB,QAAQ,CAACwB,IAA/C,CADF,eAEE;AAAK,IAAA,SAAS,EAAG,wBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAYxB,QAAQ,CAACyB,IAArB,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAazB,QAAQ,CAAC0B,KAAtB,CAFF,CAFF,CADF;AAUA,QAAM,CAACT,QAAD,EAAWU,WAAX,IAA0BxD,QAAQ,CAAC,EAAD,CAAxC;;AAEA,WAASyD,QAAT,GAAoB;AAClB1C,IAAAA,UAAU,CAACD,UAAU,CAACI,EAAD,EAAK,OAAL,CAAX,EAA2BwC,QAAD,IAAc;AAEhDC,MAAAA,OAAO,CAACC,GAAR,CAAY5C,MAAM,CAACC,GAAG,CAACC,EAAD,EAAK,OAAL,EAAcI,MAAd,CAAJ,CAAN,CAAiCuC,IAAjC,CAAuC5C,GAAD,IAASA,GAAG,CAAC6C,IAAJ,EAA/C,CAAZ;AACA,YAAMC,GAAG,GAAG,EAAZ;AACAL,MAAAA,QAAQ,CAACM,OAAT,CAAkB/C,GAAD,IAAS8C,GAAG,CAACE,IAAJ,CAAShD,GAAG,CAAC6C,IAAJ,EAAT,CAA1B;AACAN,MAAAA,WAAW,CAACO,GAAG,CAACb,GAAJ,CAASgB,IAAD,KAAW;AAC7B,kBAAUA,IAAI,CAACf,EADc;AACV,oBAAYe,IAAI,CAACC,QADP;AAE7B,oBAAYD,IAAI,CAACE,QAFY;AAEF,mBAAWF,IAAI,CAACG,OAFd;AAG7B,iBAASH,IAAI,CAACI;AAAM;;AAHS,OAAX,CAAR,CAAD,CAAX;AAKD,KAVS,CAAV;AAWD;;AAEDrE,EAAAA,SAAS,CAAC,MAAM;AACdwD,IAAAA,QAAQ;AACT,GAFQ,EAEN,EAFM,CAAT;;AAIA,OAAK,MAAMS,IAAX,IAAmBpB,QAAnB,EAA6B;AACzBoB,IAAAA,IAAI,CAAC,MAAD,CAAJ,GAAerC,QAAf;AACH;;AAED,QAAM,CAACgB,QAAD,EAAW0B,WAAX,IAA0BvE,QAAQ,eAAC,yCAAD,CAAxC;AACAC,EAAAA,SAAS,CAAC,MAAM;AACZsE,IAAAA,WAAW,CAACzB,QAAQ,CAAC0B,MAAT,CAAiBN,IAAD,IAAUA,IAAI,CAACC,QAAL,IAAetC,QAAQ,CAACQ,IAAlD,EACKa,GADL,CACS,CAACgB,IAAD,EAAOO,CAAP,kBACG;AAAI,MAAA,GAAG,EAAEA,CAAT;AAAY,MAAA,KAAK,EAAE;AAACrB,QAAAA,SAAS,EAAC;AAAX,OAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAG,MAAA,IAAI,EAAC,GAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAa,oBAAC,QAAD;AAAU,MAAA,QAAQ,EAAEc,IAApB;AAA0B,MAAA,KAAK,EAAE,KAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAb,CADJ,CAFZ,CAAD,CAAX;AAKH,GANQ,EAMN,CAACpB,QAAD,CANM,CAAT;AASA,QAAM,CAAC4B,MAAD,EAASC,SAAT,IAAsB3E,QAAQ,CAAC,MAAD,CAApC;AACA,QAAM4E,aAAa,GAAG;AACpB,YAAQ3B,QADY;AAEpB,YAAQI,IAFY;AAGpB,YAAQR;AAHY,GAAtB;;AAMA,WAASgC,MAAT,GAAkB;AAChB,QAAIvC,QAAQ,CAACS,MAAT,IAAmB,CAAvB,EAA0B;AACxB,UAAI+B,MAAM,CAACC,OAAP,CAAe,uBAAf,CAAJ,EAA6C;AAC3CvD,QAAAA,QAAQ,CAAC,CAAC,CAAF,CAAR;AACD;AACF,KAJD,MAIO;AACLA,MAAAA,QAAQ,CAAC,CAAC,CAAF,CAAR;AACD;AACF;;AAGC,sBACI;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGU,KADH,eAEE;AAAK,IAAA,SAAS,EAAEP,iBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAGE;AAAK,IAAA,SAAS,EAAC,kBAAf;AAAkC,IAAA,KAAK,EAAE;AAACqD,MAAAA,eAAe,EAAG,OAAMnD,QAAQ,CAACoD,KAAM;AAAxC,KAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAQ,IAAA,SAAS,EAAC,iBAAlB;AAAoC,IAAA,OAAO,EAAEJ,MAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,kBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,CADF,eAQI,oBAAC,YAAD;AAAc,IAAA,QAAQ,EAAEhD,QAAQ,CAACQ,IAAjC;AAAuC,IAAA,UAAU,EAAC,WAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARJ,CAHF,eAaE,oBAAC,OAAD;AAAS,IAAA,MAAM,EAAIqC,MAAnB;AAA2B,IAAA,SAAS,EAAIC,SAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAbF,eAcE;AAAI,IAAA,SAAS,EAAC,wBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGC,aAAa,CAACF,MAAD,CADhB,CAdF,eAiBE,oBAAC,UAAD;AAAY,IAAA,QAAQ,EAAEpC,QAAtB;AAAgC,IAAA,OAAO,EAAEU,aAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjBF,CAFF,CADJ;AAwBC;;AAGL,eAAe5B,cAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom'\n\nimport RestTitleBox from '../components/RestTitleBox.js'\n\nimport dhspic from '../img/DHS_photo.jpeg';\nimport MenuListItem from '../components/MenuListItem';\nimport RestTab from '../components/RestTab.js';\nimport TabBar from '../components/TabBar.js';\nimport CartButton from '../components/CartButton.js';\nimport MenuModal from '../components/MenuModal.js';\nimport CartModal from '../components/CartModal.js';\nimport RoomCard from '../components/RoomCard.js';\n\nimport staticDB from \"../db/static.json\";\nimport { collection, onSnapshot, getDoc, doc } from \"firebase/firestore\";\nimport { db } from \"../firebase-config.js\";\n\nimport '../rest-page.css'\nimport { AiOutlineArrowLeft } from \"react-icons/ai\";\n\nfunction RestaurantPage() {\n  const params = useParams();\n  const { userId, restId } = params;\n  const navigate = useNavigate();\n  // const arrRestName = [\"대학생 치킨\", \"베리신주쿠\", \"마쯔미\"];\n\n  const [isUserJoingFromRoomCard, setIsUserJoingFromRoomCard] = useState(false);\n  const [classNameRestPage, setClassNameRestPage] = useState(\"restPage\");\n\n  const [restInfo, setRestInfo] = useState(staticDB[params.restId])\n  const [menuItemInfo, setMenuItemInfo] = useState(restInfo.menu)\n  \n  const [modal, setModal] = useState(<></>)\n\n  function openMenuModal(menu) {\n    setModal(<MenuModal menuInfo={menu} restName={restInfo.name} setModal={setModal} cartItem={cartItem} setCartItem={setCartItem} ></MenuModal>)\n  }\n  \n  function handleCartItemUpdate() {\n    if (document.getElementsByClassName(\"restPage\")[0].previousSibling !== null \n      && document.getElementsByClassName(\"restPage\")[0].previousSibling.className === \"CartModal__\") {\n      setModal(<CartModal restName={restInfo.name} menuList={cartItem} setMenuList={setCartItem} setModal={setModal} \n            roomList={roomList} roomLength={roomInfo.length}></CartModal>)\n    }\n      \n  }\n  \n  const [cartItem, setCartItem] \n    = useState([])\n  useEffect(handleCartItemUpdate, [cartItem])\n  \n  function openCartModal() {\n    setModal(<CartModal restName={restInfo.name} menuList={cartItem} setMenuList={setCartItem} setModal={setModal} \n          roomList={roomList} roomLength={roomInfo.length}></CartModal>)\n  }\n\n  const menuList = menuItemInfo.map((menu) => \n  <li key={menu.id} style={{listStyle:'none'}} className = \"mainPage__menu-item\">\n    <a onClick={() => openMenuModal(menu)}> <MenuListItem menuItemInfo={menu}></MenuListItem></a>\n  </li>\n  )\n\n  const info = \n    <div className = \"restPage__info\">\n      <p className = \"restPage__info-text\">{restInfo.info}</p>\n      <div className = \"restPage__info-opening\">\n        <p>Open at {restInfo.open}</p>\n        <p>Close at {restInfo.close}</p>\n      </div>\n    </div>\n  \n\n  const [roomInfo, setRoomInfo] = useState([]);\n\n  function getRooms() {\n    onSnapshot(collection(db, \"rooms\"), (snapshot) => {\n      \n      console.log(getDoc(doc(db, \"users\", userId)).then((doc) => doc.data()))\n      const tmp = [];\n      snapshot.forEach((doc) => tmp.push(doc.data()))\n      setRoomInfo(tmp.map((room) => ({\n        'roomId': room.id, 'restName': room.restName,\n        'deliInfo': room.deliInfo, 'ordStat': room.ordStat,\n        'parti': room.parti /*, 'entime': room.endTime*/\n      })));\n    })\n  }\n\n  useEffect(() => {\n    getRooms();\n  }, []);\n\n  for (const room of roomInfo) {\n      room['rest'] = restInfo;\n  }\n\n  const [roomList, setRoomList] = useState(<></>)\n  useEffect(() => {\n      setRoomList(roomInfo.filter((room) => room.restName==restInfo.name)\n                      .map((room, i) => \n                              <li key={i} style={{listStyle:'none'}}>\n                                  <a href=\"#\"> <RoomCard roomInfo={room} photo={false}></RoomCard></a>\n                              </li>))\n  }, [roomInfo]);\n  \n\n  const [curTab, setCurTab] = useState(\"menu\");\n  const curTabContent = {\n    \"menu\": menuList,\n    \"info\": info,\n    \"room\": roomList\n  }\n\n  function goBack() {\n    if (cartItem.length != 0) {\n      if (window.confirm(\"카트가 비워집니다. 뒤로 가시겠습니까?\")) {\n        navigate(-1)\n      }\n    } else {\n      navigate(-1)\n    }\n  }\n\n\n    return (\n        <div className=\"ui-container\">\n          {modal}\n          <div className={classNameRestPage}>\n            {/* <TabBar/> */}\n            \n            <div className=\"rest-title-image\" style={{backgroundImage: `url(${restInfo.photo})`}}>\n              <div className=\"rest-title\">\n                <button className=\"rest-title-back\" onClick={goBack}>\n                    <AiOutlineArrowLeft /> \n                </button>\n                <div></div>\n              </div>\n                \n                <RestTitleBox restName={restInfo.name} restRating=\"5.0 (100)\"></RestTitleBox>   \n            </div>\n            <RestTab curTab = {curTab} setCurTab = {setCurTab}/>\n            <ul className=\"restPage__content-list\">\n              {curTabContent[curTab]}\n            </ul>\n            <CartButton cartItem={cartItem} onClick={openCartModal}/>\n          </div>\n        </div>\n    )\n    }\n\n\nexport default RestaurantPage\n"]},"metadata":{},"sourceType":"module"}