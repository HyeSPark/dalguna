{"ast":null,"code":"import _slicedToArray from\"/Users/HS/Documents/GitHub/dalguna/dalguna/dalguna/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'../cat_filter.css';import dhspic from'../img/DHS_photo.jpeg';import CatFilterBar from'../components/CatFilterBar';import RestCard from'../components/RestCard';import{useParams,Link}from'react-router-dom';import{collection,onSnapshot}from\"firebase/firestore\";import{db}from\"../firebase-config.js\";import staticDB from\"../db/static.json\";function CatFilter(){var params=useParams();var catNameList=[\"한식\",\"일식\",\"분식\",\"아시아\",\"샐러드\",\"도시락\",\"중국집\",\"덮밥\"];var _useState=useState(staticDB),_useState2=_slicedToArray(_useState,2),restInfo=_useState2[0],setRestInfo=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),roomInfo=_useState4[0],setRoomInfo=_useState4[1];function getRooms(){onSnapshot(collection(db,\"rooms\"),function(snapshot){var tmp=[];snapshot.forEach(function(doc){return tmp.push({room_id:doc.id,room:doc.data()});});setRoomInfo(tmp.map(function(_ref){var room=_ref.room;return{'roomId':room.id,'restName':room.restName,'deliInfo':room.deliInfo,'ordStat':room.ordStat,'parti':room.parti,'endTime':room.endTime,'rest':restInfo.filter(function(rest){return rest.name==room.restName;})[0],'timeLeft':parseInt((room.endTime.seconds-new Date().getTime()/1000)/60),'poolMon':room.parti.reduce(function(money,part){return money+part.price;},0)};}));});}useEffect(function(){getRooms();},[]);var _useState5=useState(params.name),_useState6=_slicedToArray(_useState5,2),curSelect=_useState6[0],setCurSelect=_useState6[1];var visRestList=restInfo.filter(function(rest){return rest.category==curSelect;});var restList=visRestList.map(function(rest){return/*#__PURE__*/React.createElement(\"li\",{key:rest.name,style:{listStyle:'none'}},/*#__PURE__*/React.createElement(Link,{to:\"../\".concat(params.userId,\"/restaurant/\").concat(rest.id)},/*#__PURE__*/React.createElement(RestCard,{restInfo:rest,roomInfo:roomInfo})));});return/*#__PURE__*/React.createElement(\"div\",{className:\"ui-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"CatFilter__\"},/*#__PURE__*/React.createElement(CatFilterBar,{catNameList:catNameList,cur:curSelect,setCur:setCurSelect}),/*#__PURE__*/React.createElement(\"ul\",{className:\"CatFilter__restList\"},restList,/*#__PURE__*/React.createElement(\"li\",{style:{marginBottom:\"15px\",fontSize:\"0.8rem\",color:\"grey\"}},\"\\uCC3E\\uC73C\\uC2DC\\uB294 \\uC74C\\uC2DD\\uC810\\uC774 \\uC5C6\\uB098\\uC694? \\uC81C\\uC791\\uC790\\uC5D0\\uAC8C \\uC54C\\uB824\\uC8FC\\uC138\\uC694\"))));}export default CatFilter;","map":{"version":3,"sources":["/Users/HS/Documents/GitHub/dalguna/dalguna/dalguna/src/pages/CatFilter.js"],"names":["React","useState","useEffect","dhspic","CatFilterBar","RestCard","useParams","Link","collection","onSnapshot","db","staticDB","CatFilter","params","catNameList","restInfo","setRestInfo","roomInfo","setRoomInfo","getRooms","snapshot","tmp","forEach","doc","push","room_id","id","room","data","map","restName","deliInfo","ordStat","parti","endTime","filter","rest","name","parseInt","seconds","Date","getTime","reduce","money","part","price","curSelect","setCurSelect","visRestList","category","restList","listStyle","userId","marginBottom","fontSize","color"],"mappings":"yKAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAO,mBAAP,CACA,MAAOC,CAAAA,MAAP,KAAmB,uBAAnB,CACA,MAAOC,CAAAA,YAAP,KAAyB,4BAAzB,CACA,MAAOC,CAAAA,QAAP,KAAqB,wBAArB,CAEA,OAASC,SAAT,CAAoBC,IAApB,KAAgC,kBAAhC,CACA,OAASC,UAAT,CAAqBC,UAArB,KAAuC,oBAAvC,CACA,OAASC,EAAT,KAAmB,uBAAnB,CAEA,MAAOC,CAAAA,QAAP,KAAqB,mBAArB,CAEA,QAASC,CAAAA,SAAT,EAAqB,CACjB,GAAMC,CAAAA,MAAM,CAAGP,SAAS,EAAxB,CAEA,GAAMQ,CAAAA,WAAW,CAAG,CAAC,IAAD,CAAO,IAAP,CAAa,IAAb,CAAmB,KAAnB,CAA0B,KAA1B,CAAiC,KAAjC,CAAwC,KAAxC,CAA+C,IAA/C,CAApB,CAEA,cAAgCb,QAAQ,CAACU,QAAD,CAAxC,wCAAOI,QAAP,eAAiBC,WAAjB,eACA,eAAgCf,QAAQ,CAAC,EAAD,CAAxC,yCAAOgB,QAAP,eAAiBC,WAAjB,eAEA,QAASC,CAAAA,QAAT,EAAoB,CAChBV,UAAU,CAACD,UAAU,CAACE,EAAD,CAAK,OAAL,CAAX,CAA0B,SAACU,QAAD,CAAc,CAChD,GAAMC,CAAAA,GAAG,CAAG,EAAZ,CACAD,QAAQ,CAACE,OAAT,CAAiB,SAACC,GAAD,QAASF,CAAAA,GAAG,CAACG,IAAJ,CAAS,CAACC,OAAO,CAAEF,GAAG,CAACG,EAAd,CAAkBC,IAAI,CAAEJ,GAAG,CAACK,IAAJ,EAAxB,CAAT,CAAT,EAAjB,EACAV,WAAW,CAACG,GAAG,CAACQ,GAAJ,CAAQ,kBAAEF,CAAAA,IAAF,MAAEA,IAAF,OAAa,CAC7B,SAAUA,IAAI,CAACD,EADc,CACV,WAAYC,IAAI,CAACG,QADP,CAE7B,WAAYH,IAAI,CAACI,QAFY,CAEF,UAAWJ,IAAI,CAACK,OAFd,CAG7B,QAASL,IAAI,CAACM,KAHe,CAGR,UAAWN,IAAI,CAACO,OAHR,CAI7B,OAAQnB,QAAQ,CAACoB,MAAT,CAAgB,SAACC,IAAD,QAAUA,CAAAA,IAAI,CAACC,IAAL,EAAaV,IAAI,CAACG,QAA5B,EAAhB,EAAsD,CAAtD,CAJqB,CAK7B,WAAYQ,QAAQ,CAAC,CAACX,IAAI,CAACO,OAAL,CAAaK,OAAb,CAAuB,GAAIC,CAAAA,IAAJ,GAAWC,OAAX,GAAuB,IAA/C,EAAuD,EAAxD,CALS,CAM7B,UAAWd,IAAI,CAACM,KAAL,CAAWS,MAAX,CAAkB,SAACC,KAAD,CAAQC,IAAR,QAAiBD,CAAAA,KAAK,CAAGC,IAAI,CAACC,KAA9B,EAAlB,CAAuD,CAAvD,CANkB,CAAb,EAAR,CAAD,CAAX,CAQD,CAXS,CAAV,CAYD,CAED3C,SAAS,CAAC,UAAM,CACdiB,QAAQ,GACT,CAFQ,CAEN,EAFM,CAAT,CAIF,eAAkClB,QAAQ,CAACY,MAAM,CAACwB,IAAR,CAA1C,yCAAOS,SAAP,eAAkBC,YAAlB,eACA,GAAIC,CAAAA,WAAW,CAAGjC,QAAQ,CAACoB,MAAT,CAAgB,SAACC,IAAD,QAAUA,CAAAA,IAAI,CAACa,QAAL,EAAeH,SAAzB,EAAhB,CAAlB,CACA,GAAMI,CAAAA,QAAQ,CAAGF,WAAW,CAACnB,GAAZ,CAAgB,SAACO,IAAD,qBACjC,0BAAI,GAAG,CAAEA,IAAI,CAACC,IAAd,CAAoB,KAAK,CAAE,CAACc,SAAS,CAAC,MAAX,CAA3B,eACE,oBAAC,IAAD,EAAM,EAAE,cAAQtC,MAAM,CAACuC,MAAf,wBAAoChB,IAAI,CAACV,EAAzC,CAAR,eAAuD,oBAAC,QAAD,EAAU,QAAQ,CAAEU,IAApB,CAA0B,QAAQ,CAAEnB,QAApC,EAAvD,CADF,CADiC,EAAhB,CAAjB,CAKA,mBACI,2BAAK,SAAS,CAAC,cAAf,eACI,2BAAK,SAAS,CAAC,aAAf,eACI,oBAAC,YAAD,EAAc,WAAW,CAAEH,WAA3B,CAAwC,GAAG,CAAEgC,SAA7C,CAAwD,MAAM,CAAEC,YAAhE,EADJ,cAEI,0BAAI,SAAS,CAAC,qBAAd,EACKG,QADL,cAEI,0BAAI,KAAK,CAAE,CAACG,YAAY,CAAC,MAAd,CAAsBC,QAAQ,CAAC,QAA/B,CAAyCC,KAAK,CAAC,MAA/C,CAAX,wIAFJ,CAFJ,CADJ,CADJ,CAcH,CAED,cAAe3C,CAAAA,SAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport '../cat_filter.css';\nimport dhspic from '../img/DHS_photo.jpeg';\nimport CatFilterBar from '../components/CatFilterBar';\nimport RestCard from '../components/RestCard';\n\nimport { useParams, Link } from 'react-router-dom';\nimport { collection, onSnapshot } from \"firebase/firestore\";\nimport { db } from \"../firebase-config.js\";\n\nimport staticDB from \"../db/static.json\";\n\nfunction CatFilter() {\n    const params = useParams();\n\n    const catNameList = [\"한식\", \"일식\", \"분식\", \"아시아\", \"샐러드\", \"도시락\", \"중국집\", \"덮밥\"]\n\n    const [restInfo, setRestInfo] = useState(staticDB)\n    const [roomInfo, setRoomInfo] = useState([]);\n\n    function getRooms() {\n        onSnapshot(collection(db, \"rooms\"), (snapshot) => {\n          const tmp = [];\n          snapshot.forEach((doc) => tmp.push({room_id: doc.id, room: doc.data()}))\n          setRoomInfo(tmp.map(({room}) => ({\n              'roomId': room.id, 'restName': room.restName,\n              'deliInfo': room.deliInfo, 'ordStat': room.ordStat,\n              'parti': room.parti, 'endTime': room.endTime,\n              'rest': restInfo.filter((rest) => rest.name == room.restName)[0],\n              'timeLeft': parseInt((room.endTime.seconds - new Date().getTime() / 1000) / 60),\n              'poolMon': room.parti.reduce((money, part) => money + part.price, 0)\n            })));\n        })\n      }\n    \n      useEffect(() => {\n        getRooms();\n      }, []);\n    \n    const [curSelect, setCurSelect] = useState(params.name)\n    var visRestList = restInfo.filter((rest) => rest.category==curSelect)\n    const restList = visRestList.map((rest) => \n    <li key={rest.name} style={{listStyle:'none'}}>\n      <Link to={`../${params.userId}/restaurant/${rest.id}`}><RestCard restInfo={rest} roomInfo={roomInfo}></RestCard></Link>\n    </li>\n    )\n    return (\n        <div className=\"ui-container\">\n            <div className=\"CatFilter__\">\n                <CatFilterBar catNameList={catNameList} cur={curSelect} setCur={setCurSelect}/>\n                <ul className=\"CatFilter__restList\">\n                    {restList}\n                    <li style={{marginBottom:\"15px\", fontSize:\"0.8rem\", color:\"grey\"}}>\n                        찾으시는 음식점이 없나요? 제작자에게 알려주세요\n                    </li>\n                </ul>\n            </div>\n        </div>\n        \n    )\n}\n\nexport default CatFilter"]},"metadata":{},"sourceType":"module"}