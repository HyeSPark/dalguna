{"ast":null,"code":"var _jsxFileName = \"/Users/HS/Documents/GitHub/dalguna/dalguna/dalguna/src/pages/Main.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { collection, onSnapshot } from \"firebase/firestore\";\nimport { db } from \"../firebase-config.js\";\nimport RoomCard from '../components/RoomCard';\nimport CatFilter from './CatFilter';\nimport CatItem from '../components/CatItem';\nimport RestCard from '../components/RestCard.js';\nimport NavBar from '../components/NavBar.js';\nimport TabBar from '../components/TabBar.js';\nimport CartModal from \"../components/CartModal\";\nimport staticDB from \"../db/static.json\";\nimport dhspic from '../img/DHS_photo.jpeg';\nimport \"../main.css\"; // function getDB(restInfo, setRestInfo, roomInfo, setRoomInfo) {\n//   getDocs(collection(db, 'DYNAMIC')).then((snapshot) => {\n//     const tmp = [];\n//     snapshot.forEach((doc) => tmp.push(doc.data()))\n//     setRoomInfo(tmp.map((room) => ({\n//       'restName': room.restName, 'deliLoc': room.deliLoc,\n//       'poolMon': room.poolMon, 'endTime': room.endTime,\n//       'ordStat': room.ordStat, 'participants': room.participants,\n//       'roomId': room.roomID,\n//       'timeLeft': 15\n//     })))\n//   })\n// }\n\nfunction Main() {\n  const restInfo = staticDB;\n  const [roomInfo, setRoomInfo] = useState([]);\n  const [isUserParticipants, setIsUserParticipants] = useState(true);\n  const catInfoList = [{\n    name: \"Korean\",\n    img: dhspic\n  }, {\n    name: \"Japanese\",\n    img: dhspic\n  }, {\n    name: \"Snacks\",\n    img: dhspic\n  }, {\n    name: \"Asian\",\n    img: dhspic\n  }, {\n    name: \"Salad\",\n    img: dhspic\n  }, {\n    name: \"Doshirak\",\n    img: dhspic\n  }, {\n    name: \"중국집\",\n    img: dhspic\n  }, {\n    name: \"덮밥\",\n    img: dhspic\n  }];\n  const restList = restInfo.map((rest, i) => /*#__PURE__*/React.createElement(\"li\", {\n    key: i,\n    style: {\n      listStyle: 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `./restaurant/${rest.id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(RestCard, {\n    restInfo: rest,\n    roomInfo: roomInfo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 43\n    }\n  })))); // [IMPLEMENTED] key will be changed below (room name is not unique)\n\n  const roomList = roomInfo.map((room, i) => /*#__PURE__*/React.createElement(\"li\", {\n    key: i,\n    style: {\n      listStyle: 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, \" \", /*#__PURE__*/React.createElement(RoomCard, {\n    roomInfo: room,\n    photo: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 20\n    }\n  }))));\n  const catList = catInfoList.map((cat, i) => /*#__PURE__*/React.createElement(\"li\", {\n    key: i,\n    style: {\n      listStyle: 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: `./filter/${cat.name}`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, \" \", /*#__PURE__*/React.createElement(CatItem, {\n    img: cat.img,\n    name: cat.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 46\n    }\n  }), \" \")));\n  const [myRoomCard, setMyRoomCard] = useState( /*#__PURE__*/React.createElement(React.Fragment, null));\n  const [otherRoomList, setOtherRoomList] = useState( /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mainPage__separation\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mainPage__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }, \"Room Suggestions\"), /*#__PURE__*/React.createElement(\"ul\", {\n    style: {\n      margin: 0\n    },\n    className: \"mainPage__room-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, roomInfo.map((room, i) => /*#__PURE__*/React.createElement(\"li\", {\n    key: i,\n    style: {\n      listStyle: 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, \" \", /*#__PURE__*/React.createElement(RoomCard, {\n    roomInfo: room,\n    photo: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 26\n    }\n  })))))));\n  const {\n    userId\n  } = useParams();\n\n  function getRooms() {\n    onSnapshot(collection(db, \"rooms\"), snapshot => {\n      const tmp = [];\n      snapshot.forEach(doc => tmp.push({\n        room_id: doc.id,\n        room: doc.data()\n      }));\n      setRoomInfo(tmp.map(_ref => {\n        let {\n          room,\n          room_id\n        } = _ref;\n        const roomInfoObj = {\n          'roomId': room.id,\n          'restName': room.restName,\n          'deliInfo': room.deliInfo,\n          'ordStat': room.ordStat,\n          'parti': room.parti\n          /*, 'entime': room.endTime*/\n          ,\n          'rest': restInfo.filter(rest => rest.name == room.restName)[0]\n        };\n\n        if (room.parti.filter(el => el.id === userId).length !== 0) {\n          setMyRoomCard( /*#__PURE__*/React.createElement(Link, {\n            to: {\n              pathname: `./${room_id}`\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 25\n            }\n          }, \" \", /*#__PURE__*/React.createElement(RoomCard, {\n            roomInfo: roomInfoObj,\n            photo: true,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 63\n            }\n          })));\n          setOtherRoomList( /*#__PURE__*/React.createElement(React.Fragment, null));\n          setIsUserParticipants(false);\n        }\n\n        return roomInfoObj;\n      }));\n    });\n  }\n\n  useEffect(() => {\n    getRooms();\n  }, []);\n  useEffect(() => {\n    setOtherRoomList( /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mainPage__separation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mainPage__title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 5\n      }\n    }, \"Room Suggestions\"), /*#__PURE__*/React.createElement(\"ul\", {\n      style: {\n        margin: 0\n      },\n      className: \"mainPage__room-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 5\n      }\n    }, roomInfo.map((room, i) => /*#__PURE__*/React.createElement(\"li\", {\n      key: i,\n      style: {\n        listStyle: 'none'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }, \" \", /*#__PURE__*/React.createElement(RoomCard, {\n      roomInfo: room,\n      photo: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 26\n      }\n    })))))));\n  }, [roomInfo, isUserParticipants]); // [Not Solved] 근데 my room 이 생긴 상태의 사람은 suggestion 없애야할듯\n  // for (const room of roomInfo) {\n  //   room['rest'] = restInfo.filter((rest) => rest.name == room.restName)[0];\n  // }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ui-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mainPage__\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(NavBar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: \"105px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mainPage__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }\n  }, \"Food Categories\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"mainPage__cat-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }, catList), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mainPage__separation\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mainPage__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }, \"Your Room\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mainPage__room-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }\n  }, myRoomCard), otherRoomList, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mainPage__separation\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mainPage__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }, \"Restaurant List\"), /*#__PURE__*/React.createElement(\"ul\", {\n    style: {\n      margin: 0\n    },\n    className: \"mainPage__rest-card-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 9\n    }\n  }, restList)));\n}\n\nexport default Main;","map":{"version":3,"sources":["/Users/HS/Documents/GitHub/dalguna/dalguna/dalguna/src/pages/Main.js"],"names":["React","useState","useEffect","Link","useParams","collection","onSnapshot","db","RoomCard","CatFilter","CatItem","RestCard","NavBar","TabBar","CartModal","staticDB","dhspic","Main","restInfo","roomInfo","setRoomInfo","isUserParticipants","setIsUserParticipants","catInfoList","name","img","restList","map","rest","i","listStyle","id","roomList","room","catList","cat","pathname","myRoomCard","setMyRoomCard","otherRoomList","setOtherRoomList","margin","userId","getRooms","snapshot","tmp","forEach","doc","push","room_id","data","roomInfoObj","restName","deliInfo","ordStat","parti","filter","el","length","height"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { collection, onSnapshot } from \"firebase/firestore\";\nimport { db } from \"../firebase-config.js\";\n\nimport RoomCard from '../components/RoomCard';\nimport CatFilter from './CatFilter';\nimport CatItem from '../components/CatItem';\nimport RestCard from '../components/RestCard.js'\nimport NavBar from '../components/NavBar.js'\nimport TabBar from '../components/TabBar.js'\nimport CartModal from \"../components/CartModal\";\n\nimport staticDB from \"../db/static.json\";\nimport dhspic from '../img/DHS_photo.jpeg';\n\nimport \"../main.css\";\n\n// function getDB(restInfo, setRestInfo, roomInfo, setRoomInfo) {\n//   getDocs(collection(db, 'DYNAMIC')).then((snapshot) => {\n//     const tmp = [];\n//     snapshot.forEach((doc) => tmp.push(doc.data()))\n//     setRoomInfo(tmp.map((room) => ({\n//       'restName': room.restName, 'deliLoc': room.deliLoc,\n//       'poolMon': room.poolMon, 'endTime': room.endTime,\n//       'ordStat': room.ordStat, 'participants': room.participants,\n//       'roomId': room.roomID,\n//       'timeLeft': 15\n//     })))\n//   })\n// }\n\nfunction Main() {\n  const restInfo = staticDB;\n  const [roomInfo, setRoomInfo] = useState([]);\n  const [isUserParticipants, setIsUserParticipants] = useState(true);\n\n\n  const catInfoList = [\n    {name: \"Korean\", img:dhspic}, \n    {name: \"Japanese\", img:dhspic},\n    {name: \"Snacks\", img:dhspic},\n    {name: \"Asian\", img:dhspic},\n    {name: \"Salad\", img:dhspic},\n    {name: \"Doshirak\", img:dhspic},\n    {name: \"중국집\", img:dhspic},\n    {name: \"덮밥\", img:dhspic},\n  ]\n\n  const restList = restInfo.map((rest, i) => \n  <li key={i} style={{listStyle:'none'}}>\n     <Link to={`./restaurant/${rest.id}`}><RestCard restInfo={rest} roomInfo={roomInfo}></RestCard></Link>\n  </li>)\n\n    // [IMPLEMENTED] key will be changed below (room name is not unique)\n  const roomList = roomInfo.map((room, i) => \n  <li key={i} style={{listStyle:'none'}}>\n      <a href=\"#\"> <RoomCard roomInfo={room} photo={true}></RoomCard></a>\n  </li>\n  )\n\n  const catList = catInfoList.map((cat, i) => \n      <li key={i} style={{listStyle:'none'}}>\n        <Link to={{\n          pathname:`./filter/${cat.name}`}}> <CatItem img={cat.img} name={cat.name}></CatItem> </Link>\n      </li>\n  )\n  \n  \n  const [myRoomCard, setMyRoomCard] = useState(<></>);\n  const [otherRoomList, setOtherRoomList] = useState(<>\n    <div className = \"mainPage__separation\"/>\n    <div className = \"mainPage__title\">Room Suggestions</div>\n    <ul style={{margin:0}} className = \"mainPage__room-list\">\n        {roomInfo.map((room, i) => \n        <li key={i} style={{listStyle:'none'}}>\n            <a href=\"#\"> <RoomCard roomInfo={room} photo={true}></RoomCard></a>\n        </li>)}\n    </ul></>);\n  \n  const { userId } = useParams();\n\n  function getRooms() {\n    onSnapshot(collection(db, \"rooms\"), (snapshot) => {\n      const tmp = [];\n      snapshot.forEach((doc) => tmp.push({room_id: doc.id, room: doc.data()}))\n      setRoomInfo(tmp.map(({room, room_id}) => {\n        const roomInfoObj = {\n          'roomId': room.id, 'restName': room.restName,\n          'deliInfo': room.deliInfo, 'ordStat': room.ordStat,\n          'parti': room.parti /*, 'entime': room.endTime*/,\n          'rest': restInfo.filter((rest) => rest.name == room.restName)[0],\n        }\n\n        if (room.parti.filter((el) => el.id === userId).length !== 0) {\n          setMyRoomCard(<Link to={{pathname:`./${room_id}`}}> <RoomCard roomInfo={roomInfoObj} photo={true}></RoomCard></Link>)\n          setOtherRoomList(<></>)\n          setIsUserParticipants(false);\n        }\n        return roomInfoObj }));\n\n    })\n  }\n\n  useEffect(() => {\n    getRooms();\n  }, []);\n\n  useEffect(() => {\n    setOtherRoomList(<>\n    <div className = \"mainPage__separation\"/>\n    <div className = \"mainPage__title\">Room Suggestions</div>\n    <ul style={{margin:0}} className = \"mainPage__room-list\">\n        {roomInfo.map((room, i) => \n        <li key={i} style={{listStyle:'none'}}>\n            <a href=\"#\"> <RoomCard roomInfo={room} photo={true}></RoomCard></a>\n        </li>)}\n    </ul></>\n    )\n\n  }, [roomInfo, isUserParticipants])\n  \n\n  \n  // [Not Solved] 근데 my room 이 생긴 상태의 사람은 suggestion 없애야할듯\n  // for (const room of roomInfo) {\n  //   room['rest'] = restInfo.filter((rest) => rest.name == room.restName)[0];\n  // }\n\n\n  return (\n    <div className=\"ui-container\">\n      <div className=\"mainPage__\">\n        <NavBar/>\n        <div style={{height:\"105px\"}}/>\n        <div className = \"mainPage__title\">Food Categories</div>\n        <ul className = \"mainPage__cat-list\">\n            {catList}\n        </ul>\n        <div className = \"mainPage__separation\"/>\n        <div className = \"mainPage__title\">Your Room</div>\n        <div className = \"mainPage__room-list\">\n            {/* {roomList[2]} */}\n            {myRoomCard}\n        </div>\n\n        {otherRoomList}\n        \n        <div className = \"mainPage__separation\"/>\n        <div className = \"mainPage__title\">Restaurant List</div>\n        <ul style={{margin:0}} className = \"mainPage__rest-card-list\">\n            {restList}\n        </ul>\n        {/* <TabBar/> */}\n      </div>\n    </div>\n      \n  )\n}\n\nexport default Main;"]},"metadata":{},"sourceType":"module"}