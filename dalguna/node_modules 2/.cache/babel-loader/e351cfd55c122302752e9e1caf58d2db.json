{"ast":null,"code":"var _jsxFileName = \"/Users/HS/Documents/GitHub/dalguna/dalguna/dalguna/src/components/CartModal.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { CgClose } from 'react-icons/cg';\nimport CartMenuItem from \"./CartMenuItem\";\nimport RoomCard from \"./RoomCard\";\nimport LongButton from \"./LongButton\";\nimport { useParams } from \"react-router-dom\";\nimport { collection, onSnapshot } from \"firebase/firestore\";\nimport { db } from \"../firebase-config.js\";\nimport NewRoomModal from \"./NewRoomModal\";\nimport \"../cart_modal.css\";\n\nfunction CartModal(props) {\n  const params = useParams();\n  const {\n    restInfo,\n    menuList,\n    setMenuList,\n    setModal,\n    setVisible\n  } = props;\n  console.log(restInfo.name);\n  const restName = restInfo.name; // const [roomInfo, setRoomInfo] = useState([{\n  //     name: \"대학생 치킨\",\n  //     timeLeft: 15,\n  //     loc: \"아름관\",\n  //     deliTime: \"21~30\",\n  //     raised: 10000,\n  //     minOrd: 15000,\n  //   }, {\n  //     name: \"마쯔미\",\n  //     timeLeft: 13,\n  //     loc: \"아름관\",\n  //     deliTime: \"31~40\",\n  //     raised: 9000,\n  //     minOrd: 13000,\n  //   }, {\n  //     name: \"잇마이타이\",\n  //     timeLeft: 10,\n  //     loc: \"아름관\",\n  //     deliTime: \"11~20\",\n  //     raised: 23000,\n  //     minOrd: 20000,\n  //   }])\n\n  const [roomInfo, setRoomInfo] = useState([]);\n\n  function getRooms() {\n    onSnapshot(collection(db, \"rooms\"), snapshot => {\n      const tmp = [];\n      snapshot.forEach(doc => tmp.push(doc.data()));\n      setRoomInfo(tmp.map(room => ({\n        'roomId': room.id,\n        'restName': room.restName,\n        'deliInfo': room.deliInfo,\n        'ordStat': room.ordStat,\n        'parti': room.parti\n        /*, 'entime': room.endTime*/\n\n      })));\n    });\n  }\n\n  useEffect(() => {\n    getRooms();\n  }, []);\n\n  for (const room of roomInfo) {\n    room['rest'] = restInfo;\n  }\n\n  const [roomList, setRoomList] = useState( /*#__PURE__*/React.createElement(React.Fragment, null));\n  useEffect(() => {\n    setRoomList(roomInfo.filter(room => room.restName == restName).map((room, i) => /*#__PURE__*/React.createElement(\"li\", {\n      key: i,\n      style: {\n        listStyle: 'none'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 37\n      }\n    }, \" \", /*#__PURE__*/React.createElement(RoomCard, {\n      roomInfo: room,\n      photo: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 50\n      }\n    })))));\n  }, [roomInfo]);\n  const deliveryAdrs = \"Areum Hall\"; // const [menuList, setMenuList] = useState([{\n  //     name: \"맛있는 돈까스\",\n  //     qnty: 1,\n  //     detail: [\"데리야끼 소스로 변경\", \"양 추가\"],\n  //     price: 10000,\n  // }])\n\n  const [menuVisible, setMenuVisible] = useState(menuList.map((menu, i) => /*#__PURE__*/React.createElement(CartMenuItem, {\n    key: i,\n    menuDetail: menu,\n    setMenuDetail: setMenuList,\n    menuList: menuList,\n    menuId: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  })));\n  useEffect(updateCartMenu, [menuList]);\n\n  function goBack() {\n    setModal( /*#__PURE__*/React.createElement(React.Fragment, null)); // setVisible(\"restPage\")\n  }\n\n  function updateCartMenu() {\n    console.log(params.userId, menuList); /////// not solvedddddd\n    // if (menuList[0] === undefined) {setMenuVisible(<CartMenuItem menuDetail={menuList[0]} setMenuDetail={setMenuList}/>)}\n    // if (menuList[0] !== undefined) {\n\n    var copied = [...menuList]; // console.log(copied.filter((el)=> el.qnty !== 0))\n\n    setMenuVisible(copied.filter(el => el.qnty !== 0).map((menu, i) => /*#__PURE__*/React.createElement(CartMenuItem, {\n      key: i,\n      menuDetail: menu,\n      setMenuDetail: setMenuList,\n      menuList: menuList,\n      menuId: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 21\n      }\n    }))); // }\n    // else if (menuList[0][\"qnty\"] !== 0) {setMenuVisible(<CartMenuItem menuDetail={menuList[0]} setMenuDetail={setMenuList}/>)}\n    // else {setMenuVisible()}\n  }\n\n  const [newRoomModal, setNewRoomModal] = useState( /*#__PURE__*/React.createElement(React.Fragment, null));\n\n  function openNewRoomModal() {\n    setNewRoomModal( /*#__PURE__*/React.createElement(\"div\", {\n      className: \"new-modal-container\",\n      onClick: closeNewRoomModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(NewRoomModal, {\n      restName: restName,\n      menuList: menuList,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 90\n      }\n    })));\n  }\n\n  const closeNewRoomModal = e => {\n    var contactHeight = e.clientY;\n    var windowHeight = window.innerHeight;\n\n    if (windowHeight - contactHeight > 255) {\n      setNewRoomModal( /*#__PURE__*/React.createElement(React.Fragment, null));\n    } // \n\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"CartModal__\",\n    style: {\n      backgroundColor: \"white\",\n      height: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"CartModal__bar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: goBack,\n    className: \"CartModal__bar-close\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CgClose, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 75\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"CartModal__bar-cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }, \"Cart\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"CartModal__address\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 22\n    }\n  }, \"Delivery to \"), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      fontWeight: \"bold\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 47\n    }\n  }, deliveryAdrs)), /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#\",\n    className: \"CartModal__address-edit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }, \"Edit\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mainPage__separation\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"CartModal__restmenu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"CartModal__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }, restName), menuVisible, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"CartModal__restmenu-add\",\n    onClick: goBack,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }, \"+ Add More Menu\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mainPage__separation\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"CartModal__room\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"CartModal__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }, \"Rooms Available\"), /*#__PURE__*/React.createElement(\"ul\", {\n    style: {\n      padding: 0\n    },\n    className: \"CartModal__room-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }, roomInfo.length !== 0 ? /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: \"grey\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 46\n    }\n  }, \" \\uD604\\uC7AC \\uAC00\\uB2A5\\uD55C \\uBC29\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4. \") : roomList)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mainPage__separation\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"CartModal__create-room\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"grey\",\n      fontSize: \"0.9rem\",\n      fontWeight: \"bold\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }\n  }, \"Didn\\u2019t find a room suitable for you?\"), /*#__PURE__*/React.createElement(LongButton, {\n    onClick: openNewRoomModal,\n    type: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 17\n    }\n  }, \"Create your own room\")), newRoomModal);\n}\n\nexport default CartModal;","map":{"version":3,"sources":["/Users/HS/Documents/GitHub/dalguna/dalguna/dalguna/src/components/CartModal.js"],"names":["React","useState","useEffect","CgClose","CartMenuItem","RoomCard","LongButton","useParams","collection","onSnapshot","db","NewRoomModal","CartModal","props","params","restInfo","menuList","setMenuList","setModal","setVisible","console","log","name","restName","roomInfo","setRoomInfo","getRooms","snapshot","tmp","forEach","doc","push","data","map","room","id","deliInfo","ordStat","parti","roomList","setRoomList","filter","i","listStyle","deliveryAdrs","menuVisible","setMenuVisible","menu","updateCartMenu","goBack","userId","copied","el","qnty","newRoomModal","setNewRoomModal","openNewRoomModal","closeNewRoomModal","e","contactHeight","clientY","windowHeight","window","innerHeight","backgroundColor","height","fontWeight","padding","length","color","fontSize"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { CgClose } from 'react-icons/cg';\nimport CartMenuItem from \"./CartMenuItem\";\nimport RoomCard from \"./RoomCard\";\nimport LongButton from \"./LongButton\";\n\nimport { useParams } from \"react-router-dom\";\nimport { collection, onSnapshot } from \"firebase/firestore\";\nimport { db } from \"../firebase-config.js\";\n\nimport NewRoomModal from \"./NewRoomModal\"\n\nimport \"../cart_modal.css\"\n\nfunction CartModal(props) {\n    const params = useParams()\n    \n    const { restInfo, menuList, setMenuList, setModal, setVisible } = props\n    console.log(restInfo.name)\n    const restName = restInfo.name\n    // const [roomInfo, setRoomInfo] = useState([{\n    //     name: \"대학생 치킨\",\n    //     timeLeft: 15,\n    //     loc: \"아름관\",\n    //     deliTime: \"21~30\",\n    //     raised: 10000,\n    //     minOrd: 15000,\n    //   }, {\n    //     name: \"마쯔미\",\n    //     timeLeft: 13,\n    //     loc: \"아름관\",\n    //     deliTime: \"31~40\",\n    //     raised: 9000,\n    //     minOrd: 13000,\n    //   }, {\n    //     name: \"잇마이타이\",\n    //     timeLeft: 10,\n    //     loc: \"아름관\",\n    //     deliTime: \"11~20\",\n    //     raised: 23000,\n    //     minOrd: 20000,\n    //   }])\n\n    const [roomInfo, setRoomInfo] = useState([]);\n\n    function getRooms() {\n      onSnapshot(collection(db, \"rooms\"), (snapshot) => {\n        const tmp = [];\n        snapshot.forEach((doc) => tmp.push(doc.data()))\n        setRoomInfo(tmp.map((room) => ({\n          'roomId': room.id, 'restName': room.restName,\n          'deliInfo': room.deliInfo, 'ordStat': room.ordStat,\n          'parti': room.parti /*, 'entime': room.endTime*/\n        })));\n      })\n    }\n  \n    useEffect(() => {\n      getRooms();\n    }, []);\n\n    for (const room of roomInfo) {\n        room['rest'] = restInfo;\n    }\n\n    const [roomList, setRoomList] = useState(<></>)\n    useEffect(() => {\n        setRoomList(roomInfo.filter((room) => room.restName==restName)\n                        .map((room, i) => \n                                <li key={i} style={{listStyle:'none'}}>\n                                    <a href=\"#\"> <RoomCard roomInfo={room} photo={false}></RoomCard></a>\n                                </li>))\n    }, [roomInfo]);\n    \n    const deliveryAdrs = \"Areum Hall\"\n    // const [menuList, setMenuList] = useState([{\n    //     name: \"맛있는 돈까스\",\n    //     qnty: 1,\n    //     detail: [\"데리야끼 소스로 변경\", \"양 추가\"],\n    //     price: 10000,\n    // }])\n\n    const [menuVisible, setMenuVisible] \n        = useState(menuList.map((menu, i) => \n            <CartMenuItem key={i} menuDetail={menu} setMenuDetail={setMenuList} menuList={menuList} menuId={i}/>))\n    \n    useEffect(updateCartMenu, [menuList]) \n    function goBack() {\n        setModal(<></>)\n        // setVisible(\"restPage\")\n    }\n    function updateCartMenu() {\n        console.log(params.userId, menuList)\n        /////// not solvedddddd\n        // if (menuList[0] === undefined) {setMenuVisible(<CartMenuItem menuDetail={menuList[0]} setMenuDetail={setMenuList}/>)}\n        // if (menuList[0] !== undefined) {\n            var copied = [...menuList]\n            // console.log(copied.filter((el)=> el.qnty !== 0))\n            setMenuVisible(copied.filter((el)=> el.qnty !== 0)\n                .map((menu, i) =>\n                    <CartMenuItem key={i} menuDetail={menu} setMenuDetail={setMenuList} menuList={menuList} menuId={i}/>))\n        // }\n        // else if (menuList[0][\"qnty\"] !== 0) {setMenuVisible(<CartMenuItem menuDetail={menuList[0]} setMenuDetail={setMenuList}/>)}\n        // else {setMenuVisible()}\n    }\n\n    const [newRoomModal, setNewRoomModal] = useState(<></>)\n\n    function openNewRoomModal() {\n        setNewRoomModal(<div className=\"new-modal-container\" onClick={closeNewRoomModal}><NewRoomModal restName={restName} menuList={menuList}/></div>)\n    }\n\n    const closeNewRoomModal = (e) => {\n        var contactHeight = e.clientY;\n        var windowHeight = window.innerHeight;\n        if (windowHeight - contactHeight > 255) {\n            setNewRoomModal(<></>)\n        }\n        \n        // \n    }\n\n    return (\n        <div className=\"CartModal__\" style={{backgroundColor:\"white\", height:\"100%\"}}>\n            <div className=\"CartModal__bar\">\n                <button onClick={goBack} className=\"CartModal__bar-close\"><CgClose></CgClose></button>\n                <span className=\"CartModal__bar-cart\">Cart</span>\n            </div>\n            <div className=\"CartModal__address\">\n                <div><span>Delivery to </span><span style={{fontWeight:\"bold\"}}>{deliveryAdrs}</span></div>\n                <a href=\"#\" className=\"CartModal__address-edit\">Edit</a>\n            </div>\n            <div className = \"mainPage__separation\"/>\n            <div className=\"CartModal__restmenu\">\n                <div className=\"CartModal__title\">{restName}</div>\n                { menuVisible }\n                <button className=\"CartModal__restmenu-add\" onClick={goBack}>+ Add More Menu</button>\n            </div>\n            <div className = \"mainPage__separation\"/>\n            {/* <div className=\"CartModal__request\">\n            </div>\n            <div className = \"mainPage__separation\"/> */}\n            <div className =\"CartModal__room\">\n                <div className=\"CartModal__title\">\n                    Rooms Available\n                </div>\n                <ul style={{padding:0}} className = \"CartModal__room-list\">\n                    {roomInfo.length !== 0 ? <p style={{color:\"grey\"}}> 현재 가능한 방이 없습니다. </p> : roomList}\n                </ul>\n            </div>\n            <div className = \"mainPage__separation\"/>\n            <div className=\"CartModal__create-room\">\n                <span style={{color:\"grey\", fontSize:\"0.9rem\", fontWeight:\"bold\"}}>Didn’t find a room suitable for you?</span>\n                <LongButton onClick={openNewRoomModal} type=\"primary\">Create your own room</LongButton>\n            </div>\n            {newRoomModal}\n        </div>\n    )\n}\n\nexport default CartModal;"]},"metadata":{},"sourceType":"module"}